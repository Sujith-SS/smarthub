
{% extends 'base.html' %}
{% block title %}
{{ product.name }} | Smarthub
{% endblock %}
{% block main_content %}
{% load static %}

<style>
    .product-view-main-image {
        transition: transform 0.3s ease;
    }

    .product-view-main-image.zoom {
        transform: scale(1.2);
        cursor: zoom-in;
    }
</style>

<div class="small-container single-product">
    <div class="row">
        <div class="col-2">
            {% if product.images.all %}
            
                <img src="{{ product.images.first.image.url }}" width="100%" id="ProductImg" class="product-view-main-image">
                <div class="small-img-row product-view-thumbnail">
                    {% for image in product.images.all %}
                        <div class="small-img-col">
                            <img src="{{ image.image.url }}" width="100%" class="small-img">
                        </div>
                    {% endfor %}
                </div>
            
            {% else %}
                <img src="{% static 'images/no-image.jpg' %}" width="100%" id="ProductImg">
            {% endif %}
        </div>
        <div class="col-2">
            <p>
                <a href="{% url 'home' %}">Home</a> / 
                <a href="{% url 'productsapp:product_list' %}">Products</a> / 
                {{ product.category.name }}
            </p>
            <h1>{{ product.name }}</h1>
            <h4>₹{{ product.price }}</h4>
            <select>
                <option>Select Size</option>
                <option>XXL</option>
                <option>XL</option>
                <option>L</option>
                <option>M</option>
                <option>S</option>
            </select>
            <input type="number" value="1">
            <a href="" class="btn">Add To Cart</a>

            <h3>Product Details <i class="fa fa-indent"></i></h3>
            <br>
            <p>{{ product.description }}</p>
        </div>
    </div>
</div>
<!-- title -->
<div class="small-container">
    <div class="row row-2">
        <h2>Related Products</h2>
        <p>View More</p>
    </div>
</div>
<!-- Products -->
<div class="small-container">
    <div class="row">
        {% for related_product in related_products %}
            <div class="col-4">
                <a href="{% url 'productsapp:product_detail' related_product.id %}" class="product-link">
                    <img src="{{ related_product.images.first.image.url }}" alt="{{ related_product.name }}">
                    <h4>{{ related_product.name }}</h4>
                    <div class="rating">
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star"></i>
                        <i class="fa fa-star-o"></i>
                    </div>
                    <p>₹{{ related_product.price }}</p>
                </a>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    var ProductImg = document.getElementById("ProductImg");
    var SmallImg = document.getElementsByClassName("small-img");

    for (let i = 0; i < SmallImg.length; i++) {
        SmallImg[i].onclick = function() {
            ProductImg.src = this.src;
        }
    }
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const mainImage = document.querySelector('.product-view-main-image');

        mainImage.addEventListener('mousemove', function (e) {
            const rect = mainImage.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const xPercent = (x / rect.width) * 100;
            const yPercent = (y / rect.height) * 100;

            mainImage.style.transformOrigin = `${xPercent}% ${yPercent}%`;
            mainImage.classList.add('zoom');
        });

        mainImage.addEventListener('mouseleave', function () {
            mainImage.classList.remove('zoom');
            mainImage.style.transformOrigin = 'center center';
        });
    });
</script>
{% endblock %}